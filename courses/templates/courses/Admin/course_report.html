{% extends "courses/Admin/mainadmin.html" %}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
{% load static %}
{% block content %}
<h2 style="margin-top: 20px; margin-left: 10px;">Course Enrollment Report</h2>
<table class="table">
    <thead>
        <tr>
            <th>Course Code</th>
            <th>Course Name</th>
            <th>Instructor</th>
            <th>Enrollment Count</th>
            <th>Capacity</th>
            <th>Popularity (%)</th>
        </tr>
    </thead>
    <tbody>
        {% for data in report_data %}
        <tr>
            <td>{{ data.course.code }}</td>
            <td>{{ data.course.name }}</td>
            <td>{{ data.course.instructor }}</td>
            <td>{{ data.enrollment_count }}</td>
            <td>{{ data.course.capacity }}</td>
            <td>{{ data.popularity|floatformat:2 }}%</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h2 style="margin-top: 20px; margin-left: 10px;">Analytics</h2>
{% if most_popular_course %}
    <p style="margin-left: 10px;"><strong>Most Popular Course:</strong> {{ most_popular_course.course.name }} ({{ most_popular_course.enrollment_count }} enrollments)</p>
{% endif %}
{% if least_popular_course %}
    <p style="margin-left: 10px;"><strong>Least Popular Course:</strong> {{ least_popular_course.course.name }} ({{ least_popular_course.enrollment_count }} enrollments)</p>
{% endif %}
{% endblock %}
