{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Registration System | Course Schedular</title>
    <!-- bootstrap css -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <!-- css -->
    <link rel="stylesheet" href="{% static "index.css" %}">
    <link rel="stylesheet" href="{% static "courses.css" %}">
</head>

<body>
    <header>
        <nav>
            <div class="nav-content Content">
                <div class="ul-content">
                    <div class="mb-3">
                        <a href="../home"> <img
                                src="https://www.marefa.org/w/images/thumb/2/26/%D8%B4%D8%B9%D8%A7%D8%B1_%D8%A7%D9%84%D8%AC%D8%A7%D9%85%D8%B9%D8%A9.png/800px-%D8%B4%D8%B9%D8%A7%D8%B1_%D8%A7%D9%84%D8%AC%D8%A7%D9%85%D8%B9%D8%A9.png"
                                width="60px" alt="logo"></a>
                    </div>
                    <ul>
                        <li><a href="../home" style="color: #00008b; text-decoration: none;">Home</a></li>
                        <li><a href="../courses" style="color:#00008b;text-decoration: none;">Courses</a>
                        <li><a href="../schedular" style="color:#00008b;text-decoration: none;">My Schedular</a>
                        </li>
                    </ul>
                </div>
                <div class="logout">
                    <select name="" style="background: none;" id="pageSelect">
                        <option>Farah</option>
                        <option value="../account">My Account</option>
                        <option value="../login" class="btn btn-danger">Logout</option>
                    </select>
                </div>
            </div>
        </nav>
        <div class="p-3 container">
            <div class="container">
                <h2 class="my-3 mb-3">Courses</h2>
            </div>
            <div class="search-container">
                <input type="text" id="searchInput" onkeyup="searchCourses()" placeholder="Search for courses...">
            </div>

            <table class="table table-bordered mt-5 text-center border-primary text-capitalize">
                <thead>
                    <tr>
                        <th scope="col">Code</th>
                        <th scope="col">Course Title</th>
                        <th scope="col">Schedule</th>
                        <th scope="col">Course Instructor</th>
                        <th scope="col">Prerequisites</th>
                        <th scope="col">Capacity</th>
                        <th scope="col"></th>
                    </tr>
                </thead>
                <tbody>
                    {% for course_schedule in available_courses %}
                    <tr>
                        <td>{{ course_schedule.course.course_code }}</td>
                        <td>{{ course_schedule.course.name }}</td>
                        <td>{{ course_schedule.days }} {{ course_schedule.start_time }} - {{ course_schedule.end_time }}</td>
                        <td>{{ course_schedule.course.instructor_name }}</td>
                        <td>
                            {% for prerequisite in course_schedule.course.prerequisites.all %}
                                {{ prerequisite.name }}
                                {% if not forloop.last %}, {% endif %}
                            {% endfor %}
                        </td>
                        <td>{{ course_schedule.course.capacity }}</td>
                        <td><button class='btn btn-success text-capitalize'>Add to Schedular</button></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="p-3 container">
            <div class="container">
                <h2 class="my-3 mb-3">Done Courses</h2>
            </div>
            <table class="table table-bordered mt-5 text-center border-primary text-capitalize">
                <thead>
                    <tr>
                        <th scope="col">Code</th>
                        <th scope="col">Course Title</th>
                        <th scope="col">Prerequisites</th>
                    </tr>
                </thead>
                <tbody>
                    {% for course_schedule in completed_courses %}
                    <tr>
                        <td>{{ course_schedule.course.course_code }}</td>
                        <td>{{ course_schedule.course.name }}</td>
                        <td>
                            {% for prerequisite in course_schedule.course.prerequisites.all %}
                                {{ prerequisite.name }}
                                {% if not forloop.last %}, {% endif %}
                            {% endfor %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </header>

    <script>
        document.getElementById('pageSelect').addEventListener('change', function () {
            const selectedPage = this.value;
            if (selectedPage) {
                window.location.href = selectedPage;
            }
        });
    </script>
</body>

</html>
